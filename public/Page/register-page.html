<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Rejestracja</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="register-page.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <!-- <script src='main.js'></script> -->
  </head>

  <body>
    <header>
      <p>Nazwa strony</p>
      <ul>
        <li><a href="auth-page.html" class="aktualne">Zaloguj się</a></li>
        <li><a href="innaStrona.html">Ogłoszenia</a></li>
        <li><a href="about.html">O nas</a></li>
        <li><a href="home-a.html">Strona główna</a></li>
      </ul>
    </header>
    <main>
        <h1 class="headerTxt">Zarejestruj się do "nazwa"</h1>
        <div class="flex-div">
            <form>
                <label for="type" class="uniLabel">Typ Konta</label>
                <select name="type" id="type" class="typeInput">
                    <option value="person">Osoba</option>
                    <option value="corp/org">Firma/Organizacja</option>
                </select>
                <label for="login" class="uniLabel">Nazwa użytkownika:</label>
                <input id="login" type="text" class="registerInput">
                <br>
                <label for="email" class="uniLabel">Email:</label>
                <input id="email" type="text" class="registerInput">
                <p class="correct-email">Wprowadziłeś niepoprawny e-mail!</p>
                <br>
                <label for="adress" class="uniLabel">Adres:</label>
                <input id="adress" type="text" class="adressInput">
                <br>
                <label for="email" class="uniLabel">Numer telefonu:</label>
                <input id="email" type="text" class="phoneNmbInput">
                <br>
                <label for="password" class="uniLabel">Hasło:</label>
                <input id="password" type="password" class="registerInput">
                <br>
                <label for="passwordConf" class="uniLabel">Powtórz hasło:</label>
                <input id="passwordConf" type="password" class="registerInput">
                <p class="correct-password">Wprowadzone hasło nie jest takie samo jak pierwotne!</p>
                <br>
                <label for="name" class="uniLabel">Imię</label>
                <input id="name" type="text" class="nameInput">
                <br>
                <label for="lastName" class="uniLabel">Nazwisko</label>
                <input id="lastName" type="text" class="nameInput">
  

                <br>
                <input type="submit" id="registerSubmitBtn" class="login-btn" value="Zarejestruj się">
            </form>
        </div>
    </main>
    <script>
      const type = document.getElementById('type');
      const nameLabel = document.querySelector('label[for=name]');
      const lastName = document.getElementById('lastName');
      const lastNameLabel = document.querySelector('label[for=lastName]');
      type.addEventListener('change', (e) => {
          value = type.value;
          if (value == "person") {
              nameLabel.innerHTML = "Imię";
              lastName.style.display = "block";
              lastNameLabel.style.display = "block";
          } else {
              nameLabel.innerHTML = "Nazwa Firmy";
              lastName.style.display = "none";
              lastNameLabel.style.display = "none";
          }
      })

      const form = document.querySelector("form");
      form.addEventListener("submit", (e) => {
          e.preventDefault(); // zapobiega pokazaniu jsona
          fetch('/register-page', { method: 'POST', body: new URLSearchParams(new FormData(event.target)), redirect: 'follow', }) // "body: new URLSearchParams(new FormData(event.target))" przekazuje dane formularza do requesta, trzeba to zrobić ze względu na "preventDefault()"
              .then(res => {
                  if (res.redirected) return window.location.href = res.url; // Jeżeli wprowadzone dane są poprawne przekieruje na stronę główną
                  else res.json().then(data => console.log(data)) // Niepoprawne dane są opisane w zwróconym obiekcie "data" 
              })
      });

  </script>
  </body>
</html>
